(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),s=n.n(a),o=n(2),i=n(8),l=n.n(i),u=n(11),j=n(9),b=n(3),d=n(10),h=n(1);var O=function(e){return Object(h.jsx)(d.b,{to:"/search",children:Object(h.jsx)("div",{className:"open-search",children:Object(h.jsx)("p",{children:"Add Books"})})})};var f=function(e){return Object(h.jsxs)("div",{className:"bookshelf",children:[Object(h.jsx)("h2",{className:"bookshelf-title",children:e.title}),Object(h.jsx)("div",{className:"bookshelf-books",children:Object(h.jsx)("ol",{className:"books-grid",children:e.children})})]})},x="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:p},m=function(){return fetch("".concat(x,"/books"),{headers:v}).then((function(e){return e.json()})).then((function(e){return e.books}))},k=function(e,t){return fetch("".concat(x,"/books/").concat(e.id),{method:"PUT",headers:Object(o.a)(Object(o.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},g=function(e){return fetch("".concat(x,"/search"),{method:"POST",headers:Object(o.a)(Object(o.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))};var y=function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)([]),o=Object(j.a)(s,2),i=o[0],b=o[1],d=function(){var t=Object(u.a)(l.a.mark((function t(n){var c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.target.value,s=n.target.closest(".book"),a(r.splice(-1,0,c)),b(i.splice(-1,0,s)),t.next=6,k(i[0],r[0]);case 6:e.setFlag(!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("li",{children:Object(h.jsxs)("div",{className:"book",id:e.id,children:[Object(h.jsxs)("div",{className:"book-top",children:[Object(h.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.url,")")}}),Object(h.jsx)("div",{className:"book-shelf-changer",children:Object(h.jsxs)("select",{onChange:d,value:e.shelf||"none",children:[Object(h.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(h.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(h.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(h.jsx)("option",{value:"read",children:"Read"}),Object(h.jsx)("option",{value:"none",children:"None"})]})})]}),Object(h.jsx)("div",{className:"book-title",children:e.title}),Object(h.jsx)("div",{className:"book-authors",children:e.authors}),Object(h.jsx)("div",{})]})})},N=function(e){var t=Object(c.useRef)(!1);Object(c.useEffect)((function(){t.current?console.log(e):t.current=!0}),[e]);var n=function(t){return t.map((function(t){return Object(c.createElement)(y,Object(o.a)(Object(o.a)({},e),{},{key:t.id,id:t.id,title:t.title,authors:t.authors.join(","),url:t.imageLinks.thumbnail,shelf:t.shelf}))}))};return Object(h.jsxs)("div",{className:"list-books",children:[Object(h.jsx)("div",{className:"list-books-title",children:Object(h.jsx)("h1",{children:"My Reads"})}),Object(h.jsx)("div",{className:"list-books-content"}),Object(h.jsx)(f,Object(o.a)(Object(o.a)({title:"Want to read"},e),{},{children:n(e.wantToRead)})),Object(h.jsx)(f,Object(o.a)(Object(o.a)({title:"Currently reading"},e),{},{children:n(e.currentlyReading)})),Object(h.jsx)(f,Object(o.a)(Object(o.a)({title:"Read"},e),{},{children:n(e.read)})),Object(h.jsx)(O,{})]})};var R=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)({}),i=Object(j.a)(s,2),b=i[0],f=i[1],x=Object(c.useRef)(!1);Object(c.useRef)((function(){x.current||(x.current=!0)}),[b]);var p=function(){var t=Object(u.a)(l.a.mark((function t(n){var c,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f({}),t.prev=1,c=n.target.value,a((function(){return c})),t.next=6,g(r);case 6:if(s=t.sent,console.log(s),!Array.isArray(s)){t.next=13;break}o=s.map((function(t){var n=e.books.find((function(e){return e.id===t.id}));return t.shelf=n?n.shelf:"none",t})).filter((function(e){return e.imageLinks})),f((function(){return o})),t.next=15;break;case 13:return f({}),t.abrupt("return",Object(h.jsx)("h1",{children:"Please enter a valid search term"}));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"search-books",children:[Object(h.jsxs)("div",{className:"search-books-bar",children:[Object(h.jsx)(d.b,{to:"/",children:Object(h.jsx)("button",{className:"close-search",children:"Close"})}),Object(h.jsx)("div",{className:"search-books-input-wrapper",children:Object(h.jsx)("input",{type:"text",placeholder:"Search by title or author (example: Science)",onChange:p})})]}),Object(h.jsx)("div",{className:"search-books-results",children:Object(h.jsx)("ol",{className:"books-grid"})})]}),Object(h.jsx)(O,{}),Object(h.jsxs)("div",{className:"books-grid",children:[void 0===b&&0===r.length&&Object(h.jsx)("h1",{children:"Please enter a valid search term"}),void 0!==b&&0!==r.length&&function(t){try{return t.map((function(t){return Object(c.createElement)(y,Object(o.a)(Object(o.a)({},e),{},{key:t.id,id:t.id,title:t.title,authors:t.authors,url:t.imageLinks.thumbnail,shelf:t.shelf}))}))}catch(n){console.log(n)}}(b)]})]})};n(34);function w(e){var t=Object(c.useState)({books:[],wantToRead:[],currentlyReading:[],read:[]}),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!0),d=Object(j.a)(i,2),O=d[0],f=d[1];Object(c.useEffect)((function(){O&&x()}),[O]);var x=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return n=e.sent,e.next=5,n.filter((function(e){return e.shelf==="".concat(t)}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=4,m();case 4:return n=e.sent,e.next=7,t("wantToRead");case 7:return c=e.sent,e.next=10,t("currentlyReading");case 10:return r=e.sent,e.next=13,t("read");case 13:a=e.sent,s((function(){return{books:n,wantToRead:c,currentlyReading:r,read:a}})),f(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)("div",{className:"app"}),Object(h.jsxs)(b.c,{children:[Object(h.jsx)(b.a,{path:"/",exact:!0,children:Object(h.jsx)(N,Object(o.a)(Object(o.a)({},a),{},{setFlag:f}))}),Object(h.jsx)(b.a,{path:"/search",exact:!0,children:Object(h.jsx)(R,Object(o.a)(Object(o.a)({},a),{},{setFlag:f}))})]})]})}n(35);s.a.render(Object(h.jsx)(d.a,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.32612292.chunk.js.map